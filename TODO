DONE

    It's more likely to be a bug in my packet system, which is complex.

    Or a bug in the allocation code, which is also complex.

    What the fuck. Where do I start debugging this?!

TODO

    Idea. Split out the key read and write packet functionality into functions that can be unit tested.

    Then, re-implement the network interface using these functions and see if the bugs still occur.

    If they do, then pull the functions out of the network interface, and run over the same inputs and see if the result reproduces.

    Eventually, simplify enough so that it is possible to isolate the actual bug.

